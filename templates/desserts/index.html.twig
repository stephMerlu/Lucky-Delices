{% extends 'base.html.twig' %}

{% block title %}Hello DessertsController!{% endblock %}

{% block body %}
<section class="presentation-entree">
    <h1>Les Desserts</h1>
    <img src="/images/Tarte fraise.jpg" alt="">
    <ul class="choix">
        <li><a href="#chocolat">Au chocolat</a></li>
        <li><a href="#fruit">Au fruit</a></li>
        <li><a href="#macaron">Les macarons</a></li>
        <li><a href="#autre">Les autres gourmandisses</a></li>
    </ul>
</section>
<section class="chocolat">
  <h2 id="chocolat">Mes dessserts au chocolat</h2>
    <div class="painting-presentation">
        <div class="cards">
            {% for recipe in chocolatRecipes %}
            <div class="card">
                <div class="card__face card__face--front">
                    <img src="{{ vich_uploader_asset(recipe, 'imageFile') }}" />
                    <h5 class="card-title">{{ recipe.name }}</h5>
                </div>
                <div class="card__face card__face--back">
                    <img src="/images/lucky2.png" />
                    <div class="card-body"> 
                        <p class="card-text">
                          {% if app.user %}
                          <div class="user-logged-in">
                            {% set isUserLiked = recipe.id in likedRecipeIds %}
                            {% if isUserLiked %}
                            <a href="#" class="bookmark liked" data-recipe-id="{{ recipe.id }}">
                              <i class="fas fa-bookmark float-end"></i>
                            </a>
                            {% else %}
                            <a href="#" class="bookmark" data-recipe-id="{{ recipe.id }}">
                              <i class="far fa-bookmark float-end"></i>
                            </a>
                            {% endif %}
                          </div>
                          {% endif %}
                            <ul>
                                <li>Temps : <span>{{ recipe.time }}</span></li>
                                <li>Lien Youtube : <span><a href="{{ recipe.youtube }}">Cliquez ici</a></span></li>
                                <li>Difficulté : <span>{{ recipe.level }}</span></li>
                                <li>Nombre de personnes : <span>{{ recipe.people }}</span></li>
                            </ul>
                        </p>
                        <a href="{{ path('app_presentation_recette', {id: recipe.id}) }}" class="btn btn-primary">Voir la recette</a>
                    </div>
                </div>
            </div> 
            {% endfor %}
        </div>
    </div>
    <div class="d-flex align-items-center justify-content-center w-100">
      <button class="prev-chocolat btn btn-add active">Précédent</button>
      <button class="next-chocolat btn btn-add active">Suivant</button>
    </div>
</section>
<section class="fruit">
  <h2 id="fruit">Mes desserts au fruit</h2>
    <div class="painting-presentation">
        <div class="cards">
            {% for recipe in fruitRecipes %}
            <div class="card">
                <div class="card__face card__face--front">
                    <img src="{{ vich_uploader_asset(recipe, 'imageFile') }}" />
                    <h5 class="card-title">{{ recipe.name }}</h5>
                </div>
                <div class="card__face card__face--back">
                    <img src="/images/lucky2.png" />
                    <div class="card-body"> 
                        <p class="card-text">
                          {% if app.user %}
                          <div class="user-logged-in">
                            {% set isUserLiked = recipe.id in likedRecipeIds %}
                            {% if isUserLiked %}
                            <a href="#" class="bookmark liked" data-recipe-id="{{ recipe.id }}">
                              <i class="fas fa-bookmark float-end"></i>
                            </a>
                            {% else %}
                            <a href="#" class="bookmark" data-recipe-id="{{ recipe.id }}">
                              <i class="far fa-bookmark float-end"></i>
                            </a>
                            {% endif %}
                          </div>
                          {% endif %}
                            <ul>
                                <li>Temps : <span>{{ recipe.time }}</span></li>
                                <li>Lien Youtube : <span><a href="{{ recipe.youtube }}">Cliquez ici</a></span></li>
                                <li>Difficulté : <span>{{ recipe.level }}</span></li>
                                <li>Nombre de personnes : <span>{{ recipe.people }}</span></li>
                            </ul>
                        </p>
                        <a href="{{ path('app_presentation_recette', {id: recipe.id}) }}" class="btn btn-primary">Voir la recette</a>
                    </div>
                </div>
            </div> 
            {% endfor %}
        </div>
    </div>
    <div class="d-flex align-items-center justify-content-center w-100">
      <button class="prev-fruit btn btn-add active">Précédent</button>
      <button class="next-fruit btn btn-add active">Suivant</button>
    </div>
</section>
<section class="macaron">
  <h2 id="macaron">Mes macarons</h2>
    <div class="painting-presentation">
        <div class="cards">
            {% for recipe in macaronRecipes %}
            <div class="card">
                <div class="card__face card__face--front">
                    <img src="{{ vich_uploader_asset(recipe, 'imageFile') }}" />
                    <h5 class="card-title">{{ recipe.name }}</h5>
                </div>
                <div class="card__face card__face--back">
                    <img src="/images/lucky2.png" />
                    <div class="card-body"> 
                        <p class="card-text">
                          {% if app.user %}
                          <div class="user-logged-in">
                            {% set isUserLiked = recipe.id in likedRecipeIds %}
                            {% if isUserLiked %}
                            <a href="#" class="bookmark liked" data-recipe-id="{{ recipe.id }}">
                              <i class="fas fa-bookmark float-end"></i>
                            </a>
                            {% else %}
                            <a href="#" class="bookmark" data-recipe-id="{{ recipe.id }}">
                              <i class="far fa-bookmark float-end"></i>
                            </a>
                            {% endif %}
                          </div>
                          {% endif %}
                            <ul>
                                <li>Temps : <span>{{ recipe.time }}</span></li>
                                <li>Lien Youtube : <span><a href="{{ recipe.youtube }}">Cliquez ici</a></span></li>
                                <li>Difficulté : <span>{{ recipe.level }}</span></li>
                                <li>Nombre de personnes : <span>{{ recipe.people }}</span></li>
                            </ul>
                        </p>
                        <a href="{{ path('app_presentation_recette', {id: recipe.id}) }}" class="btn btn-primary">Voir la recette</a>
                    </div>
                </div>
            </div> 
            {% endfor %}
        </div>
    </div>
    <div class="d-flex align-items-center justify-content-center w-100">
      <button class="prev-macaron btn btn-add active">Précédent</button>
      <button class="next-macaron btn btn-add active">Suivant</button>
    </div>
</section>
<section class="autre">
  <h2 id="autre">Mes autres gourmandisses</h2>
    <div class="painting-presentation">
        <div class="cards">
            {% for recipe in autresGourmandissesRecipes %}
            <div class="card">
                <div class="card__face card__face--front">
                    <img src="{{ vich_uploader_asset(recipe, 'imageFile') }}" />
                    <h5 class="card-title">{{ recipe.name }}</h5>
                </div>
                <div class="card__face card__face--back">
                    <img src="/images/lucky2.png" />
                    <div class="card-body"> 
                        <p class="card-text">
                          {% if app.user %}
                          <div class="user-logged-in">
                            {% set isUserLiked = recipe.id in likedRecipeIds %}
                            {% if isUserLiked %}
                            <a href="#" class="bookmark liked" data-recipe-id="{{ recipe.id }}">
                              <i class="fas fa-bookmark float-end"></i>
                            </a>
                            {% else %}
                            <a href="#" class="bookmark" data-recipe-id="{{ recipe.id }}">
                              <i class="far fa-bookmark float-end"></i>
                            </a>
                            {% endif %}
                          </div>
                          {% endif %}
                            <ul>
                                <li>Temps : <span>{{ recipe.time }}</span></li>
                                <li>Lien Youtube : <span><a href="{{ recipe.youtube }}">Cliquez ici</a></span></li>
                                <li>Difficulté : <span>{{ recipe.level }}</span></li>
                                <li>Nombre de personnes : <span>{{ recipe.people }}</span></li>
                            </ul>
                        </p>
                        <a href="{{ path('app_presentation_recette', {id: recipe.id}) }}" class="btn btn-primary">Voir la recette</a>
                    </div>
                </div>
            </div> 
            {% endfor %}
        </div>
    </div>
    <div class="d-flex align-items-center justify-content-center w-100">
      <button class="prev-autre btn btn-add active">Précédent</button>
      <button class="next-autre btn btn-add active">Suivant</button>
    </div>
</section>
<script>
document.addEventListener('DOMContentLoaded', function() {
  function setupCategoryNavigation(categorySelector, prevButtonSelector, nextButtonSelector) {
    var categoryRecipes = document.querySelectorAll(categorySelector + ' .card');
    var categoryIndex = 0;
    var recipeCount = 5;

    for (var i = recipeCount; i < categoryRecipes.length; i++) {
      categoryRecipes[i].style.display = 'none';
    }

    var prevButton = document.querySelector(prevButtonSelector);
    var nextButton = document.querySelector(nextButtonSelector);

    var categorySection = document.querySelector(categorySelector);

    function checkButtons() {
      if (categoryIndex === 0) {
        prevButton.style.display = 'none';
      } else {
        prevButton.style.display = 'block';
      }

      if (categoryIndex + recipeCount >= categoryRecipes.length) {
        nextButton.style.display = 'none';
      } else {
        nextButton.style.display = 'block';
      }
    }

    nextButton.addEventListener('click', function() {
      for (var i = categoryIndex; i < categoryIndex + recipeCount; i++) {
        if (categoryRecipes[i]) {
          categoryRecipes[i].style.display = 'none';
        }
      }

      categoryIndex += recipeCount;
      for (var i = categoryIndex; i < categoryIndex + recipeCount; i++) {
        if (categoryRecipes[i]) {
          categoryRecipes[i].style.display = 'block';
        }
      }

      checkButtons();

      categorySection.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });

    prevButton.addEventListener('click', function() {
      for (var i = categoryIndex; i < categoryIndex + recipeCount; i++) {
        if (categoryRecipes[i]) {
          categoryRecipes[i].style.display = 'none';
        }
      }

      categoryIndex -= recipeCount;
      for (var i = categoryIndex; i < categoryIndex + recipeCount; i++) {
        if (categoryRecipes[i]) {
          categoryRecipes[i].style.display = 'block';
        }
      }

      checkButtons();

      categorySection.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });

    checkButtons();
  }

  setupCategoryNavigation('.chocolat', '.prev-chocolat', '.next-chocolat');
  setupCategoryNavigation('.fruit', '.prev-fruit', '.next-fruit');
  setupCategoryNavigation('.macaron', '.prev-macaron', '.next-macaron');
  setupCategoryNavigation('.autre', '.prev-autre', '.next-autre');
});
</script>
{% endblock %}
